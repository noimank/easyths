# 常见问题

## 同花顺连接失败

**问题描述**: 无法连接到同花顺客户端

**可能原因与解决方案**:

1. **同花顺客户端未启动**
   - 确保同花顺交易客户端已正常启动并登录

2. **地址配置错误**
   - 检查 `ths_client_url` 配置是否正确
   - 默认地址为 `http://127.0.0.1:8888`

3. **版本不兼容**
   - 确保同花顺版本为 **11.4 或更高版本**
   - 旧版本可能不支持 API 接口

4. **API Key 配置问题**
   - 检查 `ths_api_key` 是否与同花顺客户端中设置的一致
   - 如设置了 IP 白名单，请确认当前 IP 在白名单中

5. **权限不足**
   - 尝试以管理员权限运行 EasyTHS

## 数据获取异常

**问题描述**: 能连接但无法获取正确的数据

**解决方案**:

- 确认同花顺客户端已登录账号
- 检查网络连接是否正常
- 尝试重启同花顺客户端和 EasyTHS 服务

## 权限错误

**问题描述**: 提示权限不足或无法访问

**解决方案**:

- 以管理员身份运行程序
- 检查防火墙设置，确保端口未被阻止

---

## 未能解决问题？

如果您遇到上述方法无法解决的问题，请通过以下方式向我们反馈：

### 提交 Issue

请在 [GitHub Issues](https://github.com/noimank/easyths/issues) 提交问题，为了帮助我们快速定位和解决问题，请提供以下信息：

#### 必需信息

1. **环境信息**
   - 操作系统版本（如 Windows 10/11）
   - Python 版本（`python --version`）
   - EasyTHS 版本（`pip show easyths`）
   - 同花顺客户端版本

2. **问题描述**
   - 清晰描述遇到的问题
   - 您期望的行为是什么
   - 实际发生了什么

3. **复现步骤**
   - 提供详细的可复现操作步骤
   - 示例：
     ```markdown
     1. 启动 EasyTHS 服务
     2. 调用 get_quotes() 接口
     3. 传入参数: code='600000'
     4. 观察到返回错误信息
     ```

4. **错误信息**
   - 完整的错误堆栈信息
   - 或服务端日志中的错误记录

#### 推荐信息（如适用）

5. **截图**
   - 错误界面截图
   - 同花顺客户端状态截图
   - 配置界面截图（打码敏感信息）

6. **服务运行日志**
   - EasyTHS 服务的控制台输出或日志文件
   - 日志级别建议设置为 `DEBUG` 以获取更多信息

7. **最小复现代码**
   - 如果是 API 调用问题，提供可以复现问题的最小代码示例

#### Issue 模板

```markdown
### 问题描述
[简要描述问题]

### 环境信息
- 操作系统: [如 Windows 11]
- Python 版本: [如 3.11]
- EasyTHS 版本: [如 0.1.0]
- 同花顺版本: [如 11.6]

### 复现步骤
1. [第一步]
2. [第二步]
3. ...

### 期望行为
[描述您期望发生什么]

### 实际行为
[描述实际发生了什么]

### 错误信息
```
[粘贴完整的错误日志]
```

### 截图
[如有相关截图，请在此上传]

### 其他信息
[任何其他有助于解决问题的信息]
```

---

### 其他反馈渠道

- **讨论区**: [GitHub Discussions](https://github.com/noimank/easyths/discussions) - 适合提问和交流
- **邮件**: noimank@163.com

我们会尽快回复并解决问题！
